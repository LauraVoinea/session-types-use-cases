% !TEX root = smtp_main.tex
\section{Sequence Diagram}

\begin{sequencediagram}
	\mythread{C}{\Client}
	\mythread[3]{Intermediate}{\Intermediate}
	\mythread[3]{S}{\Server}

	\mymess[near start]{S}{\code{\_220(String)}}{Intermediate}
	\mymess[near start]{Intermediate}{\code{220: text}}{C}
	\mymess[near start]{S}{\code{book(Price)}}{C}
	\mymess{C}{\code{quote(Contribution)}}{Intermediate}

	\begin{sdblock}{alt}{Choice at \Intermediate}
		\mymess{Intermediate}{\code{AGREE}}{C}
		\mymess{Intermediate}{\code{AGREE}}{S}
		\mymess[near start]{C}{\code{transfer(Money)}}{S}
		\mymess{Intermediate}{\code{transfer(Money)}}{S}

		\separateline{C}{S}

		\mymess{Intermediate}{\code{QUIT}}{C}
		\mymess{Intermediate}{\code{QUIT}}{S}
	\end{sdblock}
	 \stepcounter{seqlevel}
\end{sequencediagram}
